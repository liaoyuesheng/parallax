{"version":3,"file":"parallax.cjs.min.js","sources":["../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/isElement.js","../node_modules/@liaoys/events/dist/events.esm.js","../src/observer/dep.ts","../src/observer/watcher.ts","../src/index.ts"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n","function checkListener(listener) {\r\n    const listenerType = typeof listener;\r\n    if (listenerType !== 'function') {\r\n        throw new TypeError(`The \"listener\" argument must be of type Function. Received type ${listenerType}`);\r\n    }\r\n}\r\nclass Events {\r\n    constructor() {\r\n        this._events = {};\r\n    }\r\n    on(eventName, listener, prepend = false) {\r\n        checkListener(listener);\r\n        if (!this._events[eventName]) {\r\n            this._events[eventName] = [];\r\n        }\r\n        const listeners = this._events[eventName];\r\n        if (prepend) {\r\n            listeners.unshift(listener);\r\n        }\r\n        else {\r\n            listeners.push(listener);\r\n        }\r\n        return this;\r\n    }\r\n    off(eventName, listener) {\r\n        const listeners = this._events[eventName];\r\n        if (!listeners)\r\n            return this;\r\n        if (listener) {\r\n            checkListener(listener);\r\n            this._events[eventName] = listeners.filter((currentListener) => {\r\n                return currentListener !== listener;\r\n            });\r\n        }\r\n        else {\r\n            this._events[eventName] = [];\r\n        }\r\n        return this;\r\n    }\r\n    once(eventName, listener, prepend = false) {\r\n        checkListener(listener);\r\n        const proxyListener = (...args) => {\r\n            this.off(eventName, proxyListener);\r\n            listener.apply(this, args);\r\n        };\r\n        return this.on(eventName, proxyListener, prepend);\r\n    }\r\n    emit(eventName, ...args) {\r\n        const listeners = this._events[eventName];\r\n        if (!listeners || !listeners.length) {\r\n            return false;\r\n        }\r\n        listeners.forEach((listener) => {\r\n            listener.apply(this, args);\r\n        });\r\n        return true;\r\n    }\r\n}\n\nexport { Events as default };\n//# sourceMappingURL=events.esm.js.map\n","import Watcher from './watcher'\n\nclass Dep {\n  subs: Watcher[] = []\n  data: any;\n\n  constructor(initialData?: any) {\n    this.data = initialData\n  }\n\n  addSub(watcher: Watcher) {\n    this.subs.push(watcher)\n    if(this.data !== undefined) {\n      watcher.update(this.data)\n    }\n  }\n\n  notify(data: any) {\n    this.subs.forEach((sub) => {\n      sub.update(data)\n    })\n  }\n}\n\nexport default Dep\n","interface WatcherOptions {\n  el: HTMLElement,\n  startProgress: number,\n  endProgress: number,\n  startStyle: string,\n  endStyle: string,\n}\n\nfunction getStyleNumbers(style: string): (string | number) [] {\n  return style\n    .match(/[$\\d.]+/g)\n    .filter(numStr => numStr)\n    .map((numStr) => {\n      return numStr[0] === '$' ? numStr.substring(1) : Number(numStr)\n    })\n}\n\nfunction getStyleRenderer(options: WatcherOptions) {\n  const {startProgress, endProgress, startStyle, endStyle,} = options\n  const startStyleNumbers = getStyleNumbers(startStyle)\n  const endStyleNumbers = getStyleNumbers(endStyle)\n\n  return function (progress: number) {\n    const resultStyleNumbers = startStyleNumbers\n      .map((startNumber, index) => {\n        let endNumber = endStyleNumbers[index]\n        let round = false\n        if (typeof startNumber === 'string') {\n          startNumber = Number(startNumber)\n          round = true\n        }\n        if (typeof endNumber === 'string') {\n          endNumber = Number(endNumber)\n          round = true\n        }\n        let resultNumber = (endNumber - startNumber) * ((progress - startProgress) / (endProgress - startProgress)) + startNumber\n        const min =  startNumber < endNumber ? startNumber : endNumber\n        const max = startNumber < endNumber ? endNumber : startNumber\n        resultNumber = Math.max(Math.min(resultNumber, max), min)\n        if (round) {\n          resultNumber = Math.round(resultNumber)\n          if (resultNumber < min) {\n            resultNumber = Math.ceil(min)\n          }\n          if (resultNumber > max) {\n            resultNumber = Math.floor(max)\n          }\n        }\n        return resultNumber\n      })\n    let replaceIndex = 0\n    return endStyle.replace(/[$\\d.]+/g, () => {\n      return String(resultStyleNumbers[replaceIndex++]).trim()\n    })\n  }\n}\n\nclass Watcher {\n  el: HTMLElement\n  options: WatcherOptions\n  styleRenderer: (progress: number) => string\n\n  constructor(options: WatcherOptions) {\n    this.options = options\n    this.el = this.options.el\n    this.styleRenderer = getStyleRenderer(options)\n  }\n\n  update(progress: number) {\n    const style = this.styleRenderer(progress)\n    style\n      .split(';')\n      .forEach((styleItem) => {\n        if (!styleItem) {\n          return\n        }\n        const cssKeyValue = styleItem\n          .split(':')\n          .map(s => s.trim())\n        this.el.style[cssKeyValue[0]] = cssKeyValue[1]\n      })\n  }\n}\n\nexport default Watcher\n","import {isElement} from 'lodash-es/lodash'\nimport Events from '@liaoys/events'\nimport Dep from './observer/dep'\nimport Watcher from './observer/watcher'\n\nexport type ParallaxSelector = string | HTMLElement | NodeList | HTMLCollection | Array<HTMLElement> | ArrayLike<HTMLElement>\n\nexport interface ParallaxOptions {\n  container?: ParallaxSelector,\n  elements?: ParallaxSelector,\n  elementAttrPrefix?: string,\n  startTop?: number,\n  endTop?: number,\n  scrollElement?: ParallaxSelector,\n  customProgress?: boolean,\n  on?: {\n    [eventName: string]: (...args: any[]) => void,\n  }\n}\n\nconst EVENT_NAMES = ['init', 'progress']\n\nfunction checkEventName(eventName) {\n  if (EVENT_NAMES.indexOf(eventName) === -1) {\n    console.warn(`[parallax warn]: Event name must one of members of Array ${EVENT_NAMES}. received ${eventName}.`)\n  }\n}\n\nfunction getElements(el: ParallaxSelector, container: HTMLElement | Document = document): Array<HTMLElement> {\n  if (isElement(el)) {\n    return [el as HTMLElement]\n  }\n  if (typeof el === 'string') {\n    const els = container.querySelectorAll<HTMLElement>(el)\n    return Array.from(els)\n  }\n  return Array.from(el as Array<HTMLElement>).filter((currentEl) => {\n    return isElement(currentEl)\n  })\n}\n\nfunction getElementTop(element: HTMLElement) {\n  return element.getBoundingClientRect().top\n}\n\nfunction getProgress(value: number, startValue: number, endValue: number, minProgress?: number, maxProgress?: number) {\n  let progress = (value - startValue) / (endValue - startValue)\n  if (typeof minProgress === 'number') {\n    progress = Math.max(minProgress, progress)\n  }\n  if (typeof maxProgress === 'number') {\n    progress = Math.min(maxProgress, progress)\n  }\n  return progress\n}\n\nconst defaults = {\n  elements: '.parallax-element',\n  elementAttrPrefix: 'parallax',\n  customProgress: false,\n  startTop: 0,\n  endTop: -500,\n  on: {},\n}\n\nclass Parallax {\n  container: HTMLElement\n  options: ParallaxOptions\n  progress: number\n  private _dispatcher: Dep\n  private _eventEmitter = new Events()\n\n  constructor(options?: ParallaxOptions) {\n    this.options = Object.assign({}, defaults, options)\n    if (!this.options.customProgress) {\n      const container = getElements(this.options.container, document)[0] as HTMLElement\n      if (!container) {\n        console.warn(`[parallax warn]: Cannot find element: \"${this.options.container}\". Check the option \"container\"`)\n        return this\n      }\n      this.container = container\n    }\n\n    this._initElements()\n    this._initEvents()\n\n    if (!this.options.customProgress) {\n      this._initScroll()\n      this.update(null, true)\n    }\n\n    this._eventEmitter.emit('init', this)\n  }\n\n  private _initElements() {\n    this._dispatcher = new Dep()\n    const elements = getElements(this.options.elements, this.container)\n    if (!elements.length) {\n      console.warn(`[parallax warn]: Cannot find element: \"${this.options.elements}\". Check the option \"elements\"`)\n      return this\n    }\n    const startProgressAttrName = this.options.elementAttrPrefix + '-start-progress'\n    const endProgressAttrName = this.options.elementAttrPrefix + '-end-progress'\n    const startStyleAttrName = this.options.elementAttrPrefix + '-start-style'\n    const endStyleAttrName = this.options.elementAttrPrefix + '-end-style'\n    elements.forEach((el) => {\n      const startProgress = Number(el.getAttribute(startProgressAttrName) || 0)\n      const endProgress = Number(el.getAttribute(endProgressAttrName) || 1)\n      const startStyle = el.getAttribute(startStyleAttrName)\n      const endStyle = el.getAttribute(endStyleAttrName)\n      if (!startStyle || !endStyle) {\n        return\n      }\n      this._dispatcher.addSub(new Watcher({\n        el,\n        startProgress,\n        endProgress,\n        startStyle,\n        endStyle,\n      }))\n    })\n  }\n\n  private _initScroll(scrollElement?: ParallaxSelector) {\n    const scrollEl = scrollElement ? getElements(scrollElement)[0] : document\n    scrollEl.addEventListener('scroll', () => {\n      this.update(null, true)\n    })\n  }\n\n  private _initEvents() {\n    EVENT_NAMES.forEach((eventName) => {\n      if (Object.prototype.hasOwnProperty.call(this.options.on, eventName)) {\n        this._eventEmitter.on(eventName, this.options.on[eventName])\n      }\n    })\n  }\n\n  private _updateProgress() {\n    const containerTop = getElementTop(this.container)\n    return this.progress = getProgress(containerTop, this.options.startTop, this.options.endTop, 0, 1)\n  }\n\n  update(progress?: number, triggerProgressEvent = false) {\n    const oldProgress = this.progress\n    if (typeof progress === 'number') {\n      progress = Math.max(Math.min(progress, 1), 0)\n      this.progress = progress\n    } else {\n      if (this.options.customProgress) {\n        console.warn('[parallax warn]: In customProgress mode, the \"progress\" argument is required and must be of type number')\n        return\n      }\n      this._updateProgress()\n    }\n    if (oldProgress === this.progress) {\n      return\n    }\n    this._dispatcher.notify(this.progress)\n    if (triggerProgressEvent) {\n      this._eventEmitter.emit('progress', this, this.progress)\n    }\n  }\n\n  on(eventName: string, listener: (parallax: Parallax, progress: number) => void) {\n    checkEventName(eventName)\n    this._eventEmitter.on(eventName, listener)\n    return this\n  }\n}\n\nexport default Parallax\n"],"names":["global","Object","freeSelf","self","freeGlobal","Function","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","baseGetTag","value","isOwn","call","tag","unmasked","e","result","getRawTag","objectToString","isObjectLike","func","transform","getPrototypeOf","arg","funcProto","funcToString","objectCtorString","isElement","nodeType","proto","getPrototype","Ctor","constructor","isPlainObject","checkListener","listener","listenerType","TypeError","Events","this","_events","on","eventName","prepend","listeners","unshift","push","off","filter","currentListener","once","proxyListener","args","apply","emit","length","forEach","Dep","initialData","data","addSub","watcher","subs","update","notify","sub","getStyleNumbers","style","match","numStr","map","substring","Number","Watcher","options","el","styleRenderer","startProgress","endProgress","startStyle","endStyle","startStyleNumbers","endStyleNumbers","progress","resultStyleNumbers","startNumber","index","endNumber","round","resultNumber","min","max","Math","ceil","floor","replaceIndex","replace","String","trim","getStyleRenderer","split","styleItem","cssKeyValue","s","EVENT_NAMES","getElements","container","document","els","querySelectorAll","Array","from","currentEl","defaults","elements","elementAttrPrefix","customProgress","startTop","endTop","assign","_initElements","_initEvents","_initScroll","_eventEmitter","_dispatcher","startProgressAttrName","endProgressAttrName","startStyleAttrName","endStyleAttrName","getAttribute","scrollElement","addEventListener","_updateProgress","containerTop","getBoundingClientRect","top","startValue","endValue","minProgress","maxProgress","getProgress","triggerProgressEvent","oldProgress","indexOf","checkEventName"],"mappings":"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"}