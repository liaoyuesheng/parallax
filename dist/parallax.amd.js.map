{"version":3,"file":"parallax.amd.js","sources":["../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/isElement.js","../node_modules/@liaoys/events/dist/events.esm.js","../src/observer/dep.ts","../src/observer/watcher.ts","../src/index.ts"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n","function checkListener(listener) {\r\n    const listenerType = typeof listener;\r\n    if (listenerType !== 'function') {\r\n        throw new TypeError(`The \"listener\" argument must be of type Function. Received type ${listenerType}`);\r\n    }\r\n}\r\nclass Events {\r\n    constructor() {\r\n        this._events = {};\r\n    }\r\n    on(eventName, listener, prepend = false) {\r\n        checkListener(listener);\r\n        if (!this._events[eventName]) {\r\n            this._events[eventName] = [];\r\n        }\r\n        const listeners = this._events[eventName];\r\n        if (prepend) {\r\n            listeners.unshift(listener);\r\n        }\r\n        else {\r\n            listeners.push(listener);\r\n        }\r\n        return this;\r\n    }\r\n    off(eventName, listener) {\r\n        const listeners = this._events[eventName];\r\n        if (!listeners)\r\n            return this;\r\n        if (listener) {\r\n            checkListener(listener);\r\n            this._events[eventName] = listeners.filter((currentListener) => {\r\n                return currentListener !== listener;\r\n            });\r\n        }\r\n        else {\r\n            this._events[eventName] = [];\r\n        }\r\n        return this;\r\n    }\r\n    once(eventName, listener, prepend = false) {\r\n        checkListener(listener);\r\n        const proxyListener = (...args) => {\r\n            this.off(eventName, proxyListener);\r\n            listener.apply(this, args);\r\n        };\r\n        return this.on(eventName, proxyListener, prepend);\r\n    }\r\n    emit(eventName, ...args) {\r\n        const listeners = this._events[eventName];\r\n        if (!listeners || !listeners.length) {\r\n            return false;\r\n        }\r\n        listeners.forEach((listener) => {\r\n            listener.apply(this, args);\r\n        });\r\n        return true;\r\n    }\r\n}\n\nexport { Events as default };\n//# sourceMappingURL=events.esm.js.map\n","import Watcher from './watcher'\n\nclass Dep {\n  subs: Watcher[] = []\n  data: any;\n\n  constructor(initialData?: any) {\n    this.data = initialData\n  }\n\n  addSub(watcher: Watcher) {\n    this.subs.push(watcher)\n    if(this.data !== undefined) {\n      watcher.update(this.data)\n    }\n  }\n\n  notify(data: any) {\n    this.subs.forEach((sub) => {\n      sub.update(data)\n    })\n  }\n}\n\nexport default Dep\n","interface WatcherOptions {\n  el: HTMLElement,\n  startProgress: number,\n  endProgress: number,\n  startStyle: string,\n  endStyle: string,\n}\n\nfunction getStyleNumbers(style: string): (string | number) [] {\n  return style\n    .match(/[$\\d.]+/g)\n    .filter(numStr => numStr)\n    .map((numStr) => {\n      return numStr[0] === '$' ? numStr.substring(1) : Number(numStr)\n    })\n}\n\nfunction getStyleRenderer(options: WatcherOptions) {\n  const {startProgress, endProgress, startStyle, endStyle,} = options\n  const startStyleNumbers = getStyleNumbers(startStyle)\n  const endStyleNumbers = getStyleNumbers(endStyle)\n\n  return function (progress: number) {\n    const resultStyleNumbers = startStyleNumbers\n      .map((startNumber, index) => {\n        let endNumber = endStyleNumbers[index]\n        let round = false\n        if (typeof startNumber === 'string') {\n          startNumber = Number(startNumber)\n          round = true\n        }\n        if (typeof endNumber === 'string') {\n          endNumber = Number(endNumber)\n          round = true\n        }\n        let resultNumber = (endNumber - startNumber) * ((progress - startProgress) / (endProgress - startProgress)) + startNumber\n        const min =  startNumber < endNumber ? startNumber : endNumber\n        const max = startNumber < endNumber ? endNumber : startNumber\n        resultNumber = Math.max(Math.min(resultNumber, max), min)\n        if (round) {\n          resultNumber = Math.round(resultNumber)\n          if (resultNumber < min) {\n            resultNumber = Math.ceil(min)\n          }\n          if (resultNumber > max) {\n            resultNumber = Math.floor(max)\n          }\n        }\n        return resultNumber\n      })\n    let replaceIndex = 0\n    return endStyle.replace(/[$\\d.]+/g, () => {\n      return String(resultStyleNumbers[replaceIndex++]).trim()\n    })\n  }\n}\n\nclass Watcher {\n  el: HTMLElement\n  options: WatcherOptions\n  styleRenderer: (progress: number) => string\n\n  constructor(options: WatcherOptions) {\n    this.options = options\n    this.el = this.options.el\n    this.styleRenderer = getStyleRenderer(options)\n  }\n\n  update(progress: number) {\n    const style = this.styleRenderer(progress)\n    style\n      .split(';')\n      .forEach((styleItem) => {\n        if (!styleItem) {\n          return\n        }\n        const cssKeyValue = styleItem\n          .split(':')\n          .map(s => s.trim())\n        this.el.style[cssKeyValue[0]] = cssKeyValue[1]\n      })\n  }\n}\n\nexport default Watcher\n","import {isElement} from 'lodash-es/lodash'\nimport Events from '@liaoys/events'\nimport Dep from './observer/dep'\nimport Watcher from './observer/watcher'\n\nexport type ParallaxSelector = string | HTMLElement | NodeList | HTMLCollection | Array<HTMLElement> | ArrayLike<HTMLElement>\n\nexport interface ParallaxOptions {\n  container?: ParallaxSelector,\n  elements?: ParallaxSelector,\n  elementAttrPrefix?: string,\n  startTop?: number,\n  endTop?: number,\n  scrollElement?: ParallaxSelector,\n  customProgress?: boolean,\n  on?: {\n    [eventName: string]: (...args: any[]) => void,\n  }\n}\n\nconst EVENT_NAMES = ['init', 'progress']\n\nfunction checkEventName(eventName) {\n  if (EVENT_NAMES.indexOf(eventName) === -1) {\n    console.warn(`[parallax warn]: Event name must one of members of Array ${EVENT_NAMES}. received ${eventName}.`)\n  }\n}\n\nfunction getElements(el: ParallaxSelector, container: HTMLElement | Document = document): Array<HTMLElement> {\n  if (isElement(el)) {\n    return [el as HTMLElement]\n  }\n  if (typeof el === 'string') {\n    const els = container.querySelectorAll<HTMLElement>(el)\n    return Array.from(els)\n  }\n  return Array.from(el as Array<HTMLElement>).filter((currentEl) => {\n    return isElement(currentEl)\n  })\n}\n\nfunction getElementTop(element: HTMLElement) {\n  return element.getBoundingClientRect().top\n}\n\nfunction getProgress(value: number, startValue: number, endValue: number, minProgress?: number, maxProgress?: number) {\n  let progress = (value - startValue) / (endValue - startValue)\n  if (typeof minProgress === 'number') {\n    progress = Math.max(minProgress, progress)\n  }\n  if (typeof maxProgress === 'number') {\n    progress = Math.min(maxProgress, progress)\n  }\n  return progress\n}\n\nconst defaults = {\n  elements: '.parallax-element',\n  elementAttrPrefix: 'parallax',\n  customProgress: false,\n  startTop: 0,\n  endTop: -500,\n  on: {},\n}\n\nclass Parallax {\n  container: HTMLElement\n  options: ParallaxOptions\n  progress: number\n  private _dispatcher: Dep\n  private _eventEmitter = new Events()\n\n  constructor(options?: ParallaxOptions) {\n    this.options = Object.assign({}, defaults, options)\n    if (!this.options.customProgress) {\n      const container = getElements(this.options.container, document)[0] as HTMLElement\n      if (!container) {\n        console.warn(`[parallax warn]: Cannot find element: \"${this.options.container}\". Check the option \"container\"`)\n        return this\n      }\n      this.container = container\n    }\n\n    this._initElements()\n    this._initEvents()\n\n    if (!this.options.customProgress) {\n      this._initScroll()\n      this.update(null, true)\n    }\n\n    this._eventEmitter.emit('init', this)\n  }\n\n  private _initElements() {\n    this._dispatcher = new Dep()\n    const elements = getElements(this.options.elements, this.container)\n    if (!elements.length) {\n      console.warn(`[parallax warn]: Cannot find element: \"${this.options.elements}\". Check the option \"elements\"`)\n      return this\n    }\n    const startProgressAttrName = this.options.elementAttrPrefix + '-start-progress'\n    const endProgressAttrName = this.options.elementAttrPrefix + '-end-progress'\n    const startStyleAttrName = this.options.elementAttrPrefix + '-start-style'\n    const endStyleAttrName = this.options.elementAttrPrefix + '-end-style'\n    elements.forEach((el) => {\n      const startProgress = Number(el.getAttribute(startProgressAttrName) || 0)\n      const endProgress = Number(el.getAttribute(endProgressAttrName) || 1)\n      const startStyle = el.getAttribute(startStyleAttrName)\n      const endStyle = el.getAttribute(endStyleAttrName)\n      if (!startStyle || !endStyle) {\n        return\n      }\n      this._dispatcher.addSub(new Watcher({\n        el,\n        startProgress,\n        endProgress,\n        startStyle,\n        endStyle,\n      }))\n    })\n  }\n\n  private _initScroll(scrollElement?: ParallaxSelector) {\n    const scrollEl = scrollElement ? getElements(scrollElement)[0] : document\n    scrollEl.addEventListener('scroll', () => {\n      this.update(null, true)\n    })\n  }\n\n  private _initEvents() {\n    EVENT_NAMES.forEach((eventName) => {\n      if (Object.prototype.hasOwnProperty.call(this.options.on, eventName)) {\n        this._eventEmitter.on(eventName, this.options.on[eventName])\n      }\n    })\n  }\n\n  private _updateProgress() {\n    const containerTop = getElementTop(this.container)\n    return this.progress = getProgress(containerTop, this.options.startTop, this.options.endTop, 0, 1)\n  }\n\n  update(progress?: number, triggerProgressEvent = false) {\n    const oldProgress = this.progress\n    if (typeof progress === 'number') {\n      progress = Math.max(Math.min(progress, 1), 0)\n      this.progress = progress\n    } else {\n      if (this.options.customProgress) {\n        console.warn('[parallax warn]: In customProgress mode, the \"progress\" argument is required and must be of type number')\n        return\n      }\n      this._updateProgress()\n    }\n    if (oldProgress === this.progress) {\n      return\n    }\n    this._dispatcher.notify(this.progress)\n    if (triggerProgressEvent) {\n      this._eventEmitter.emit('progress', this, this.progress)\n    }\n  }\n\n  on(eventName: string, listener: (parallax: Parallax, progress: number) => void) {\n    checkEventName(eventName)\n    this._eventEmitter.on(eventName, listener)\n    return this\n  }\n}\n\nexport default Parallax\n"],"names":["freeGlobal","root","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","Symbol","getPrototype"],"mappings":"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"}